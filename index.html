<!DOCTYPE html>
<html lang="en">
  <head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JF0E0PJETX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-JF0E0PJETX');
    </script>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Torrent Wave</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @keyframes shimmer {
        0% { transform: translateX(-100%); }
        100% { transform: translateX(100%); }
      }
      .animate-shimmer {
        animation: shimmer 1.5s ease-in-out infinite;
      }
      @keyframes fade-in {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }
      @keyframes slide-up {
        from { transform: translateY(100%); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
      }
      
      /* Donation Styles */
      .donation-toggle {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: linear-gradient(135deg, #0ea5e9, #0369a1);
        color: white;
        border: none;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        cursor: pointer;
        z-index: 1001;
        box-shadow: 0 4px 12px rgba(14, 165, 233, 0.3);
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        font-weight: 600;
      }
      
      .donation-toggle:hover {
        transform: scale(1.1);
        box-shadow: 0 6px 16px rgba(14, 165, 233, 0.4);
      }
      
      .donation-panel {
        position: fixed;
        bottom: 80px;
        right: 20px;
        background: #1e293b;
        border: 1px solid #334155;
        border-radius: 10px;
        padding: 16px;
        color: white;
        z-index: 1000;
        max-width: 280px;
        width: calc(100vw - 60px);
        display: none;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        animation: slide-up 0.3s ease-out;
      }
      
      .crypto-address {
        background: #0f172a;
        padding: 10px;
        border-radius: 6px;
        margin: 8px 0;
        font-size: 11px;
        word-break: break-all;
        border: 1px solid #1e293b;
        line-height: 1.3;
      }
      
      .copy-btn {
        background: #374151;
        color: white;
        border: none;
        padding: 8px 12px;
        border-radius: 5px;
        font-size: 12px;
        cursor: pointer;
        transition: all 0.2s ease;
        width: 100%;
        font-weight: 500;
      }
      
      .copy-btn:hover {
        background: #4b5563;
      }
      
      .copy-btn.copied {
        background: #16a34a;
      }
      
      .qr-code {
        background: white;
        padding: 6px;
        border-radius: 6px;
        display: inline-block;
        margin: 8px 0;
      }
      
      /* Mobile Responsive */
      @media (max-width: 640px) {
        .donation-toggle {
          bottom: 15px;
          right: 15px;
          width: 48px;
          height: 48px;
          font-size: 16px;
        }
        
        .donation-panel {
          bottom: 70px;
          right: 15px;
          left: 15px;
          width: auto;
          max-width: none;
          padding: 14px;
        }
        
        .crypto-section {
          margin-bottom: 16px;
        }
      }
      
      /* Backdrop for mobile */
      .donation-backdrop {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 999;
        display: none;
      }
    </style>
  </head>
  <body class="bg-slate-900">
    <div id="root"></div>
    
    <!-- Donation Backdrop (for mobile) -->
    <div class="donation-backdrop" id="donation-backdrop" onclick="closeDonation()"></div>
    
    <!-- Donation Toggle Button -->
    <button class="donation-toggle" onclick="toggleDonation()" aria-label="Donate">
      ðŸ’°
    </button>
    
    <!-- Donation Panel -->
    <div id="donation-panel" class="donation-panel">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
        <h3 style="margin: 0; color: #38bdf8; font-size: 16px; font-weight: 600;">Support Our Server</h3>
        <button onclick="closeDonation()" style="background: none; border: none; color: #94a3b8; cursor: pointer; font-size: 18px; padding: 0; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center;" aria-label="Close">
          âœ•
        </button>
      </div>
      
      <p style="margin: 0 0 16px 0; color: #94a3b8; font-size: 13px; line-height: 1.4;">
        Your support helps keep the server running.
      </p>
      
      <div class="crypto-section">
        <div style="display: flex; align-items: center; margin-bottom: 6px;">
          <div style="width: 18px; height: 18px; background: #26A17B; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 6px; font-size: 10px; color: white; font-weight: bold;">U</div>
          <strong style="color: #26A17B; font-size: 14px;">USDT (TRC20)</strong>
        </div>
        
        <div class="qr-code">
          <img 
            src="https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=TDvs92AbCaizmcorx2rdYF2pyDWiHU3E7X" 
            alt="USDT QR Code"
            width="100"
            height="100"
            style="display: block;"
          />
        </div>
        
        <div class="crypto-address">TDvs92AbCaizmcorx2rdYF2pyDWiHU3E7X</div>
        <button onclick="copyToClipboard('TDvs92AbCaizmcorx2rdYF2pyDWiHU3E7X', this)" class="copy-btn">
          Copy USDT
        </button>
      </div>
      
      <div class="crypto-section">
        <div style="display: flex; align-items: center; margin-bottom: 6px;">
          <div style="width: 18px; height: 18px; background: #F7931A; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 6px; font-size: 10px; color: white; font-weight: bold;">B</div>
          <strong style="color: #F7931A; font-size: 14px;">Bitcoin (BTC)</strong>
        </div>
        
        <div class="qr-code">
          <img 
            src="https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=bitcoin:14KoMft8bjqQBhdx497gpBH6eGmzZLwEEu" 
            alt="Bitcoin QR Code"
            width="100"
            height="100"
            style="display: block;"
          />
        </div>
        
        <div class="crypto-address">14KoMft8bjqQBhdx497gpBH6eGmzZLwEEu</div>
        <button onclick="copyToClipboard('14KoMft8bjqQBhdx497gpBH6eGmzZLwEEu', this)" class="copy-btn">
          Copy BTC
        </button>
      </div>
    </div>

    <script>
      function toggleDonation() {
        const panel = document.getElementById('donation-panel');
        const backdrop = document.getElementById('donation-backdrop');
        const isMobile = window.innerWidth <= 640;
        
        if (panel.style.display === 'block') {
          closeDonation();
        } else {
          panel.style.display = 'block';
          if (isMobile) {
            backdrop.style.display = 'block';
            document.body.style.overflow = 'hidden';
          }
        }
      }
      
      function closeDonation() {
        const panel = document.getElementById('donation-panel');
        const backdrop = document.getElementById('donation-backdrop');
        panel.style.display = 'none';
        backdrop.style.display = 'none';
        document.body.style.overflow = 'auto';
      }
      
      function copyToClipboard(text, button) {
        // Create a temporary textarea element
        const textarea = document.createElement('textarea');
        textarea.value = text;
        textarea.style.position = 'fixed';
        textarea.style.left = '-999999px';
        textarea.style.top = '-999999px';
        document.body.appendChild(textarea);
        
        try {
          // Select and copy the text
          textarea.select();
          textarea.setSelectionRange(0, 99999); // For mobile devices
          
          const successful = document.execCommand('copy');
          document.body.removeChild(textarea);
          
          if (successful) {
            // Success feedback
            const originalText = button.textContent;
            button.textContent = 'âœ“ Copied!';
            button.classList.add('copied');
            
            setTimeout(() => {
              button.textContent = originalText;
              button.classList.remove('copied');
            }, 2000);
          } else {
            throw new Error('execCommand failed');
          }
        } catch (err) {
          // Fallback method
          try {
            navigator.clipboard.writeText(text).then(() => {
              const originalText = button.textContent;
              button.textContent = 'âœ“ Copied!';
              button.classList.add('copied');
              
              setTimeout(() => {
                button.textContent = originalText;
                button.classList.remove('copied');
              }, 2000);
            }).catch(fallbackErr => {
              console.error('Clipboard API failed:', fallbackErr);
              showFallbackCopy(button, text);
            });
          } catch (clipboardErr) {
            console.error('Both copy methods failed:', clipboardErr);
            showFallbackCopy(button, text);
          }
        }
      }
      
      function showFallbackCopy(button, text) {
        // Last resort - show text and let user manually copy
        const originalText = button.textContent;
        button.textContent = 'Select & Copy';
        button.style.background = '#dc2626';
        
        // Select the address text
        const addresses = document.querySelectorAll('.crypto-address');
        addresses.forEach(addr => {
          if (addr.textContent === text) {
            const range = document.createRange();
            range.selectNodeContents(addr);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
          }
        });
        
        setTimeout(() => {
          button.textContent = originalText;
          button.style.background = '';
          // Clear selection
          window.getSelection().removeAllRanges();
        }, 3000);
      }
      
      // Close panel when pressing Escape key
      document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
          closeDonation();
        }
      });
      
      // Close panel when clicking on backdrop (mobile)
      document.getElementById('donation-backdrop').addEventListener('click', closeDonation);
      
      // Adjust panel position on resize
      window.addEventListener('resize', function() {
        const panel = document.getElementById('donation-panel');
        if (window.innerWidth <= 640 && panel.style.display === 'block') {
          document.getElementById('donation-backdrop').style.display = 'block';
        } else {
          document.getElementById('donation-backdrop').style.display = 'none';
        }
      });
    </script>

    <script type="module" src="/index.tsx"></script>
  </body>
</html>
